(this.webpackJsonpts_project_01=this.webpackJsonpts_project_01||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var a,i,s=n(0),c=n.n(s),o=n(9),r=n.n(o),d=(n(109),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))}),l=(n(110),n(181)),u=n(182),j=n(14),b=n(21),f=n(55),p=n.n(f),h=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"4f348a4d-b27b-44e2-b016-551b13e8fd56"}}),O=function(){return h.get("todo-lists")},m=function(e){return h.post("todo-lists",{title:e})},g=function(e){return h.delete("todo-lists/".concat(e))},x=function(e,t){return h.put("todo-lists/".concat(e),{title:t})},k=function(e){return h.get("todo-lists/".concat(e,"/tasks"))},v=function(e,t){return h.delete("todo-lists/".concat(e,"/tasks/").concat(t))},C=function(e,t){return h.post("todo-lists/".concat(e,"/tasks"),{title:t})},T=function(e,t,n){return h.put("todo-lists/".concat(e,"/tasks/").concat(t),n)};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(a||(a={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(i||(i={}));var y=n(37),I=n.n(y),L=n(48),A=p.a.create(Object(b.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"fd7ee122-ff59-4cee-b5b0-6226ee5b433c"}})),w=function(e,t,n){return A.post("auth/login",{email:e,password:t,rememberMe:n})},_=function(){return A.delete("auth/login")},S=function(){return A.get("auth/me")},F=n(27),E=Object(F.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(e,t){e.isLoggedIn=t.payload}}}),N=E.reducer,P=E.actions.setIsLoggedIn,M=Object(F.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(e,t){e.status=t.payload},setIsInitializedAC:function(e,t){e.isInitialized=t.payload},setAppErrorAC:function(e,t){e.error=t.payload}}}),z=M.reducer,D=M.actions,B=D.setAppStatusAC,K=D.setIsInitializedAC,U=D.setAppErrorAC,R=function(e,t){t(B("failed")),t(U(e.message?e.message:"Some error occurred"))},q=Object(F.b)({name:"todoLists",initialState:[],reducers:{addTodoListAC:function(e,t){e.unshift(Object(b.a)(Object(b.a)({},t.payload),{},{filter:"all",status:"idle"}))},removeTodoListAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));n>-1&&e.splice(n,1)},setTodoListsAC:function(e,t){return t.payload.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{filter:"all",status:"idle"})}))},changeTodoListTitleAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].title=t.payload.title},changeTodoListFilterAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].filter=t.payload.filter},setTodoListStatusAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].status=t.payload.status}}}),H=q.reducer,J=q.actions,Z=J.addTodoListAC,G=J.removeTodoListAC,W=J.setTodoListsAC,Y=J.changeTodoListFilterAC,Q=J.setTodoListStatusAC,V=J.changeTodoListTitleAC,$=Object(F.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(e,t){var n=e[t.payload.todolistId],a=n.findIndex((function(e){return e.id===t.payload.taskId}));a>-1&&n.splice(a,1)},addTaskAC:function(e,t){e[t.payload.todoListId].unshift(t.payload)},updateTaskAC:function(e,t){var n=e[t.payload.todolistId],a=n.findIndex((function(e){return e.id===t.payload.taskId}));a>-1&&(n[a]=Object(b.a)(Object(b.a)({},n[a]),t.payload.model))},setTasksAC:function(e,t){e[t.payload.todolistId]=t.payload.tasks}},extraReducers:function(e){e.addCase(Z,(function(e,t){e[t.payload.id]=[]})),e.addCase(G,(function(e,t){delete e[t.payload.id]})),e.addCase(W,(function(e,t){t.payload.forEach((function(t){return e[t.id]=[]}))}))}}),X=$.reducer,ee=$.actions,te=ee.removeTaskAC,ne=ee.addTaskAC,ae=ee.updateTaskAC,ie=ee.setTasksAC,se=function(e,t,n){return function(a,i){a(B("loading")),a(Q({id:n,status:"loading"}));var s=i().tasks[n].find((function(t){return t.id===e}));if(s){var c=Object(b.a)({deadline:s.deadline,description:s.description,priority:s.priority,startDate:s.startDate,title:s.title,status:s.status},t);T(n,e,c).then((function(){var i=ae({taskId:e,model:t,todolistId:n});a(i)})).catch((function(e){R(e,a)})),a(B("succeeded")),a(Q({id:n,status:"succeeded"}))}else a(U("task not found"))}},ce=n(176),oe=n(137),re=n(36),de=n(183),le=n(172),ue=n(173),je=n(2),be=c.a.memo((function(e){console.log("AddItemForm called");var t=Object(s.useState)(""),n=Object(re.a)(t,2),a=n[0],i=n[1],c=Object(s.useState)(null),o=Object(re.a)(c,2),r=o[0],d=o[1],l=e.disabled?{color:"grey"}:{color:"green"},u=function(){""!==a.trim()?(e.addItem(a),i("")):d("Title is required")};return Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{variant:"outlined",error:!!r,value:a,onChange:function(e){i(e.currentTarget.value)},onKeyPress:function(e){null!==r&&d(null),13===e.charCode&&u()},label:"Title",helperText:r}),Object(je.jsx)(le.a,{style:l,onClick:u,disabled:e.disabled,children:Object(je.jsx)(ue.a,{fontSize:"large"})})]})})),fe=c.a.memo((function(e){console.log("EditableSpan called");var t=Object(s.useState)(!1),n=Object(re.a)(t,2),a=n[0],i=n[1],c=Object(s.useState)(e.value),o=Object(re.a)(c,2),r=o[0],d=o[1];return a?Object(je.jsx)(de.a,{value:r,onChange:function(e){d(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.onChange(r)}}):Object(je.jsx)("span",{onDoubleClick:function(){i(!0),d(e.value)},children:e.value})})),pe=n(175),he=n(174),Oe=n(185),me=n(61),ge=n.n(me),xe=c.a.memo((function(e){var t=Object(s.useCallback)((function(){return e.removeTask(e.task.id,e.todolistId)}),[e.task.id,e.todolistId]),n="loading"===e.listStatus,i=n?{color:"grey"}:{color:"darkred"},c=n?{color:"grey"}:{color:"green"},o=Object(s.useCallback)((function(t){var n=t.currentTarget.checked;e.changeTaskStatus(e.task.id,n?a.Completed:a.New,e.todolistId)}),[e.task.id,e.todolistId]),r=Object(s.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todolistId)}),[e.task.id,e.todolistId]);return Object(je.jsxs)("div",{className:ge.a.taskContainer,children:[Object(je.jsxs)("span",{children:[Object(je.jsx)(Oe.a,{checked:e.task.status===a.Completed,style:c,onChange:o,disabled:n}),Object(je.jsx)(fe,{value:e.task.title,onChange:r})]}),Object(je.jsx)(le.a,{onClick:t,disabled:n,style:i,children:Object(je.jsx)(he.a,{})})]},e.task.id)})),ke=c.a.memo((function(e){console.log("Todolist called");var t=Object(j.b)();Object(s.useEffect)((function(){var n,a=(n=e.tl.id,function(e){e(B("loading")),k(n).then((function(t){var a=t.data.items,i=ie({tasks:a,todolistId:n});e(i),e(B("succeeded"))})).catch((function(t){R(t,e)}))});t(a)}),[t,e.tl.id]);var n=Object(s.useCallback)((function(t){e.addTask(t,e.tl.id)}),[e.addTask,e.tl.id]),i=Object(s.useCallback)((function(t){e.changeTodolistTitle(e.tl.id,t)}),[e.tl.id,e.changeTodolistTitle]),c=Object(s.useCallback)((function(){return e.changeFilter("all",e.tl.id)}),[e.tl.id,e.changeFilter]),o=Object(s.useCallback)((function(){return e.changeFilter("active",e.tl.id)}),[e.tl.id,e.changeFilter]),r=Object(s.useCallback)((function(){return e.changeFilter("completed",e.tl.id)}),[e.tl.id,e.changeFilter]),d="loading"===e.tl.status,l=d?{color:"grey"}:{color:"darkred"},u=e.tasks;return"active"===e.tl.filter&&(u=e.tasks.filter((function(e){return e.status===a.New}))),"completed"===e.tl.filter&&(u=e.tasks.filter((function(e){return e.status===a.Completed}))),Object(je.jsxs)("div",{children:[Object(je.jsxs)("h3",{style:{textAlign:"center"},children:[Object(je.jsx)(fe,{value:e.tl.title,onChange:i}),Object(je.jsx)(le.a,{onClick:function(){e.removeTodolist(e.tl.id)},disabled:d,style:l,children:Object(je.jsx)(he.a,{})})]}),Object(je.jsx)(be,{addItem:n,disabled:d}),Object(je.jsx)("div",{className:ge.a.tasksContainer,children:u.map((function(t){return Object(je.jsx)(xe,{task:t,todolistId:e.tl.id,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus,listStatus:e.tl.status&&e.tl.status},t.id)}))}),Object(je.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(je.jsx)(pe.a,{variant:"all"===e.tl.filter?"outlined":"text",onClick:c,color:"default",disabled:d,children:"All"}),Object(je.jsx)(pe.a,{variant:"active"===e.tl.filter?"outlined":"text",onClick:o,color:"primary",disabled:d,children:"Active"}),Object(je.jsx)(pe.a,{variant:"completed"===e.tl.filter?"outlined":"text",onClick:r,color:"secondary",disabled:d,children:"Completed"})]})]})})),ve=n(13),Ce=function(){var e=Object(j.c)((function(e){return e.todoLists})),t=Object(j.c)((function(e){return e.tasks})),n=Object(j.c)((function(e){return e.auth.isLoggedIn})),a=Object(j.b)();Object(s.useEffect)((function(){var e=function(e){e(B("loading")),O().then((function(t){e(W(t.data)),e(B("succeeded"))})).catch((function(t){R(t,e)}))};a(e)}),[a]);var i=Object(s.useCallback)((function(e,t){var n=function(e,t){return function(n){n(B("loading")),n(Q({id:t,status:"loading"})),v(t,e).then((function(){n(te({taskId:e,todolistId:t})),n(B("succeeded")),n(Q({id:t,status:"succeeded"}))})).catch((function(e){R(e,n),n(Q({id:t,status:"failed"}))}))}}(e,t);a(n)}),[a]),c=Object(s.useCallback)((function(e,t){var n=function(e,t){return function(n){n(B("loading")),n(Q({id:t,status:"loading"})),C(t,e).then((function(e){if(0===e.data.resultCode){n(B("succeeded")),n(Q({id:t,status:"succeeded"}));var a=e.data.data.item;n(ne(a))}else e.data.messages.length&&(R(e.data.messages[0],n),n(Q({id:t,status:"failed"})))})).catch((function(e){R(e,n),n(Q({id:t,status:"failed"}))}))}}(e,t);a(n)}),[a]),o=Object(s.useCallback)((function(e,t,n){var i=se(e,{status:t},n);a(i)}),[a]),r=Object(s.useCallback)((function(e,t,n){var i=se(e,{title:t},n);a(i)}),[a]),d=Object(s.useCallback)((function(e,t){var n=Y({id:t,filter:e});a(n)}),[a]),l=Object(s.useCallback)((function(e){var t,n=(t=e,function(e){e(B("loading")),e(Q({id:t,status:"loading"})),g(t).then((function(){e(G({id:t})),e(B("succeeded"))})).catch((function(n){R(n,e),e(Q({id:t,status:"failed"}))}))});a(n)}),[a]),u=Object(s.useCallback)((function(e,t){var n=function(e,t){return function(n){n(B("loading")),n(Q({id:e,status:"loading"})),x(e,t).then((function(){n(V({id:e,title:t})),n(B("succeeded")),n(Q({id:e,status:"succeeded"}))})).catch((function(t){R(t,n),n(Q({id:e,status:"failed"}))}))}}(e,t);a(n)}),[a]),b=Object(s.useCallback)((function(e){var t=function(e){return function(t){t(B("loading")),m(e).then((function(e){t(Z(e.data.data.item)),t(B("succeeded"))})).catch((function(e){R(e,t)}))}}(e);a(t)}),[a]);return n?Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ce.a,{container:!0,style:{padding:"20px"},children:Object(je.jsx)(be,{addItem:b,disabled:!1})}),Object(je.jsx)(ce.a,{container:!0,spacing:3,children:e.map((function(e){var n=t[e.id];return Object(je.jsx)(ce.a,{item:!0,children:Object(je.jsx)(oe.a,{elevation:10,style:{padding:"10px",backgroundColor:"rgba(255,255,255,0.6)"},children:Object(je.jsx)(ke,{tl:e,tasks:n,removeTask:i,changeFilter:d,addTask:c,changeTaskStatus:o,removeTodolist:l,changeTaskTitle:r,changeTodolistTitle:u})})},e.id)}))})]}):Object(je.jsx)(ve.a,{to:"/login"})},Te=n(187),ye=n(184);function Ie(e){return Object(je.jsx)(ye.a,Object(b.a)({elevation:6,variant:"filled"},e))}function Le(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.app.error})),n=function(t,n){"clickaway"!==n&&e(U(null))};return Object(je.jsx)(Te.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(je.jsx)(Ie,{onClose:n,severity:"error",children:t})})}var Ae=n(177),we=n(178),_e=n(96),Se=n(188),Fe=n(180),Ee=n(179),Ne=n(74),Pe=n.n(Ne),Me=n(39),ze=function(e){var t=Object(j.b)(),n=Object(s.useCallback)((function(){t(function(){var e=Object(L.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(B("loading")),e.next=3,_();case 3:0===e.sent.data.resultCode?(t(P(!1)),t(B("succeeded"))):t(B("failed"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),a=c.a.useState(null),i=Object(re.a)(a,2),o=i[0],r=i[1],d=Boolean(o);return Object(je.jsx)(Ae.a,{position:"static",style:{background:"green"},children:Object(je.jsxs)(we.a,{className:Pe.a.appMenu,children:[Object(je.jsx)("div",{children:Object(je.jsxs)(le.a,{edge:"start",color:"inherit","aria-label":"menu",children:[Object(je.jsx)(Ee.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:function(e){r(e.currentTarget&&e.currentTarget)}}),Object(je.jsx)(_e.a,{id:"basic-menu",anchorEl:o,open:d,onClose:function(){r(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(je.jsx)(Se.a,{children:Object(je.jsx)(Me.b,{to:"/",className:Pe.a.menuLink,children:"My Todo-lists"})})})]})}),Object(je.jsx)(Fe.a,{variant:"h5",children:"Todo-lists"}),e.isLoggedIn?Object(je.jsx)(pe.a,{color:"inherit",variant:"outlined",onClick:n,children:"Log out"}):Object(je.jsx)("div",{})]})})},De=n(53),Be=n(52),Ke=n.n(Be),Ue=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth})).isLoggedIn,n=Object(De.c)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password||(t.password="Password is required"),t},onSubmit:function(t){e(function(e){return function(){var t=Object(L.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(B("loading")),t.next=3,w(e.email,e.password,e.rememberMe);case 3:0===(a=t.sent).data.resultCode?(n(P(!0)),n(B("succeeded"))):(n(U(a.data.messages[0])),n(B("failed")));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),n.resetForm()}});return t?Object(je.jsx)(ve.a,{to:"/"}):Object(je.jsx)(De.b,{value:n,children:Object(je.jsx)("div",{style:{display:"flex",justifyContent:"space-around"},children:Object(je.jsxs)(oe.a,{className:Ke.a.loginContainer,elevation:10,children:[Object(je.jsx)("h2",{style:{color:"darkGreen"},children:" Login "}),Object(je.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(je.jsxs)("div",{className:Ke.a.formItem,children:[Object(je.jsx)("label",{htmlFor:"email",children:"Email"}),Object(je.jsx)("br",{}),Object(je.jsx)(De.a,{type:"email",placeholder:"E-mail",error:n.touched.email?n.errors.email:null,name:"email"})]}),Object(je.jsxs)("div",{className:Ke.a.formItem,children:[Object(je.jsx)("label",{htmlFor:"password",children:"Password"}),Object(je.jsx)("br",{}),Object(je.jsx)(De.a,{type:"password",placeholder:"Password",error:n.touched.password?n.errors.password:null,name:"password"})]}),Object(je.jsxs)("div",{children:[Object(je.jsx)(Oe.a,{name:"rememberMe",style:{color:"green"}}),"Remember me"]}),Object(je.jsx)(pe.a,{type:"submit",style:{color:"green"},variant:"outlined",children:"Login"}),Object(je.jsxs)("div",{className:Ke.a.free,children:["To log in get registered ",Object(je.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"}),Object(je.jsx)("br",{}),"or use common test account credentials: ",Object(je.jsx)("br",{}),"Email: ",Object(je.jsx)("span",{style:{color:"black"},children:"free@samuraijs.com"})," ",Object(je.jsx)("br",{}),"Password: ",Object(je.jsx)("span",{style:{color:"black"},children:"free"})]})]})]})})})},Re=n(95),qe=n.n(Re),He=function(){return Object(je.jsx)("div",{className:qe.a.ldsCircle,children:Object(je.jsx)("div",{})})};var Je=function(){var e=Object(j.c)((function(e){return e.app})),t=e.status,n=e.isInitialized,a=Object(j.c)((function(e){return e.auth.isLoggedIn})),i=Object(j.b)();return Object(s.useEffect)((function(){i(function(){var e=Object(L.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:0===(n=e.sent).data.resultCode?t(P(!0)):t(U(n.data.messages[0])),t(K(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(K(!0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[i]),n?Object(je.jsxs)("div",{className:"App",children:[Object(je.jsx)(ze,{isLoggedIn:a}),"loading"===t&&Object(je.jsx)(l.a,{color:"secondary"}),Object(je.jsx)(u.a,{fixed:!0,children:Object(je.jsxs)(ve.d,{children:[Object(je.jsx)(ve.b,{exact:!0,path:"/",render:function(){return Object(je.jsx)(Ce,{})}}),Object(je.jsx)(ve.b,{path:"/login",render:function(){return Object(je.jsx)(Ue,{})}}),Object(je.jsx)(ve.b,{path:"/404",render:function(){return Object(je.jsx)("h1",{style:{textAlign:"center",color:"darkred",paddingTop:"100px"},children:"404 Error"})}}),Object(je.jsx)(ve.a,{from:"*",to:"/404"})]})}),Object(je.jsx)(Le,{})]}):Object(je.jsx)(He,{})},Ze=n(24),Ge=n(49),We=Object(Ze.b)({tasks:X,todoLists:H,app:z,auth:N}),Ye=Object(F.a)({reducer:We,middleware:function(e){return e().prepend(Ge.a)}});window.store=Ye,r.a.render(Object(je.jsx)(c.a.StrictMode,{children:Object(je.jsx)(Me.a,{children:Object(je.jsx)(j.a,{store:Ye,children:Object(je.jsx)(Je,{})})})}),document.getElementById("root")),d()},52:function(e,t,n){e.exports={loginContainer:"Login_loginContainer__3lCCv",formItem:"Login_formItem__QWWIz",free:"Login_free__g0Kth"}},61:function(e,t,n){e.exports={tasksContainer:"Todolist_tasksContainer__2Kisn",taskContainer:"Todolist_taskContainer__wGU3P"}},74:function(e,t,n){e.exports={appMenu:"CustomAppBar_appMenu__NS_Tb",menuLink:"CustomAppBar_menuLink__32fsN"}},95:function(e,t,n){e.exports={ldsCircle:"Loader_ldsCircle__3Ja2e"}}},[[136,1,2]]]);
//# sourceMappingURL=main.8d462550.chunk.js.map